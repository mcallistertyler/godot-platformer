[gd_scene load_steps=19 format=2]

[ext_resource path="res://player/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://textures/tvbook.png" type="Texture" id=2]
[ext_resource path="res://shaders/psx_unlit_alpha-scissor.shader" type="Shader" id=3]
[ext_resource path="res://shaders/psx_lit.shader" type="Shader" id=4]
[ext_resource path="res://textures/floor.png" type="Texture" id=5]
[ext_resource path="res://shaders/psx_unlit.shader" type="Shader" id=6]
[ext_resource path="res://textures/sparkle.png" type="Texture" id=7]
[ext_resource path="res://scenes/floatmag.gd" type="Script" id=8]

[sub_resource type="PanoramaSky" id=1]

[sub_resource type="Environment" id=2]
background_mode = 4
background_sky = SubResource( 1 )
ambient_light_color = Color( 1, 1, 1, 1 )
ambient_light_energy = 0.5

[sub_resource type="PlaneMesh" id=3]
size = Vector2( 40, 40 )
subdivide_width = 25
subdivide_depth = 25

[sub_resource type="ShaderMaterial" id=4]
shader = ExtResource( 4 )
shader_param/precision_multiplier = 2.5
shader_param/modulate_color = Color( 0.662745, 0.701961, 0.796078, 1 )
shader_param/uv_scale = Vector2( 12, 12 )
shader_param/uv_offset = Vector2( 0, 0 )
shader_param/color_depth = 15
shader_param/dither_enabled = true
shader_param/fog_enabled = false
shader_param/fog_color = Color( 0, 0, 0, 1 )
shader_param/min_fog_distance = 5.0
shader_param/max_fog_distance = 16.0
shader_param/uv_pan_velocity = Vector2( 0, 0 )
shader_param/albedoTex = ExtResource( 5 )

[sub_resource type="BoxShape" id=5]
extents = Vector3( 0.261382, 1, 0.239322 )

[sub_resource type="CubeMesh" id=6]
subdivide_width = 2

[sub_resource type="ShaderMaterial" id=7]
shader = ExtResource( 6 )
shader_param/precision_multiplier = 2.5
shader_param/modulate_color = Color( 1, 1, 1, 1 )
shader_param/uv_scale = Vector2( 1.5, 1.5 )
shader_param/uv_offset = Vector2( 0, 0 )
shader_param/color_depth = 15
shader_param/dither_enabled = true
shader_param/fog_enabled = true
shader_param/fog_color = Color( 0, 0, 0, 1 )
shader_param/min_fog_distance = 10.0
shader_param/max_fog_distance = 40.0
shader_param/uv_pan_velocity = Vector2( 0, 0 )
shader_param/albedoTex = ExtResource( 2 )

[sub_resource type="ParticlesMaterial" id=8]
spread = 180.0
gravity = Vector3( 0, 0, 0 )
initial_velocity = 3.0
initial_velocity_random = 0.3

[sub_resource type="ShaderMaterial" id=9]
shader = ExtResource( 3 )
shader_param/precision_multiplier = 2.0
shader_param/modulate_color = Color( 1, 1, 1, 1 )
shader_param/uv_scale = Vector2( 1, 1 )
shader_param/uv_offset = Vector2( 0, 0 )
shader_param/billboard = true
shader_param/y_billboard = false
shader_param/color_depth = 15
shader_param/alpha_scissor = 0.1
shader_param/albedoTex = ExtResource( 7 )

[sub_resource type="QuadMesh" id=10]
material = SubResource( 9 )
size = Vector2( 0.3, 0.3 )

[node name="World" type="Spatial"]

[node name="Player" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 11.3403, 0.788118, -13.6658 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 2 )

[node name="Floor" type="MeshInstance" parent="."]
transform = Transform( 5.13214, 0, 0, 0, 1, 0, 0, 0, 6.37977, 1.67671, -1.70224, 3.2597 )
mesh = SubResource( 3 )
material/0 = SubResource( 4 )

[node name="StaticBody" type="StaticBody" parent="Floor"]
transform = Transform( 431.031, 0, 0, 0, 1, 0, 0, 0, 391.273, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Floor/StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.993, 0 )
shape = SubResource( 5 )

[node name="OmniLight" type="OmniLight" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 24.6162, 0 )
light_bake_mode = 2
shadow_enabled = true
omni_range = 646.3

[node name="MeshInstance2" type="MeshInstance" parent="."]
transform = Transform( -0.999999, 0, -0.000296831, 0, 1, 0, 0.00148347, 0, -0.200091, 10.7022, 3.08352, 0 )
mesh = SubResource( 6 )
material/0 = SubResource( 7 )
script = ExtResource( 8 )

[node name="Particles" type="Particles" parent="MeshInstance2"]
visibility_aabb = AABB( -1.6867, -1.28354, -4, 3.3734, 2.56707, 8 )
process_material = SubResource( 8 )
draw_pass_1 = SubResource( 10 )
